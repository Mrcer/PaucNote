# 信号转换与处理
## A/D转换器
模拟信号转数字信号分四步：采样、保持、量化、编码
### 采样
* 采样定理：要保证采样不失真，采样频率必须大于等于两倍的模拟信号的频率分量
* 奈奎斯特频率：采样频率的一半
* 需要用低通滤波器滤掉频率超过奈奎斯特频率的高频信号，否则会干扰对原信号的还原
### 保持
在下次采样之前保持采样输出
### 量化
根据编码比特位决定采样精度，量化类型分只舍不入、有舍有入等。量化后就完成了二进制编码过程
## A/D转换
### 运算放大器
$\frac{V_{out}}{V_{in}}=-\frac{R_f}{R_i}$
运算放大器的输入阻抗很高，被称为虚地。可以得到两点结论，一是运算放大器几乎不影响输入信号（输入电流很小），二是可以避免输入运放前的电阻分压导致运放测量的电压差小于实际的电压差
运算放大器可以当比较器用。
### 快速（同时）ADC
结构是每一级电压用一个比较器比较输入，然后接入编码器。当所有比较器都没激活时就是0，因此编码器的0接地而不需要比较器。共需$2^n-1$个比较器。采样率通过使能信号的频率控制
优点是速度很快，缺点是成本很高
### 双斜率ADC
双斜率ADC分两段工作流程来完成转换。计时器由两个比较器，一个电容，一个计时器，一个寄存器和组合电路组成。初始状态下计数器清零，电容电压为零，组合电路控制电容接入输入电压。
1. 在采样阶段假设输入电压稳定，比较器A保证电容线性充电，此过程中比较器B保证计数器计数
2. 计数器计到某一特定数n后输出信号给组合电路，使电容接入参考低电压，电容线性放电；同时计数器重新计数
3. 电容放完电后组合电路触发寄存器记下计数器的值，并使电路复位，准备下次采样

可以发现采样时充电时间固定，而斜率由输入电压决定，于是最终充电电压反映输入电压；放电时斜率固定，放电时间就反映了充电电压，并最终反映输入电压。
### 逐次逼近ADC
由一个比较器，一个寄存器，一个DAC（数模转换）和组合电路组成。
工作原理类似天平，从高位到低位寄存器依次扫描。初始将该位置1，DAC将触发器状态转换为模拟信号给比较器比较，高了就给寄存器输入1，这样该位保持，低了输入0，该位复位。扫描完成后寄存器输出结果即最终结果
## 测试ADC
让ADC转换线性信号，DAC将ADC输出转换为模拟信号后让示波器与原信号比较，通过波形即可分析ADC工作状态。
错误有三种：丢失、错误、偏位
## D/A转换
$$V_o=\frac{V_m}{LSB}$$
$$I_ia$$
