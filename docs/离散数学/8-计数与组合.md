# 计数和组合
## 组合计数的基本原理
### 加减乘除
* 记集合S的元素数量为|S|
* （定义8.1）**加法原理**：若集合S有划分$F=\{S_1,\cdots S_n$，则

$$|S|=|S_1|+\cdots+|S_n|$$

> 不重不漏地分类，简化元素数量运算
* （定义8.2）**乘法原理**：若集合S的每个元素都是个元素构成的序列（n元组）$\langle s_1,\cdots,s_n\rangle$，每个元素$s_i$的可，能取值有$m_i$种，且对任意$i< n$无论$s_i$取$m_i$种值的哪个值，$s_{i+1}$都有$m_{i+1}$种可能的取值，则

$$\mid A_1\times\cdots\times A_n\mid =m_1\times\cdots\times m_n$$

!!! note
        注意满足乘法原理的集合，序列前一个元素与后一个元素既有一定**独立性**又可能有一定**相关性**，也就是说前一个元素选择不同，后一个元素可选的值可能不同（相关性），但可选值的数量一定相同（独立性）
!!! note
        应用乘法原理划分任务应优先考虑约束条件多的子任务，并保证后续任务的完成方法数不依赖于这个任务的完成方法

* （定义8,3）**减法原理**：对于全集U
和他的子集S，有

$$|S|=|U|-|\bar S|=|U|-|U-S|$$

* （定义8.4）**除法原理**：若集合S和集合T之间存在满函数$f:S\to T$，且T的每个元素在f下都恰好有k个原像，则

$$|T|=|S|/k$$

* （定义8.5）**一一对应原理**：如果有限集合S和集合T之间存在双函数，这他们有相同的元素个数
> 我觉得这是个定理。。
### 容斥原理
以下集合都默认为有穷集合

* （引理8.1）$|A-B|=|A|-|A\cap B|$
* （定理8.2）**两集合容斥原理**：

$$|A\cup B|=|A|+|B|-|A\cap B|$$

* （推论8.3）**三集合容斥原理**：

$$|A\cup B\cup C|=|A|+|B|+|C|-|A\cap B|-|A\cap C|-|B\cap C|+|A\cap B\cap C|$$

> 三集合容斥原理推导的基本思路是将$A\cup B$看作一个集合来运用两集合容斥原理展开，更多集合的容斥原理可以以此类推
### 鸽笼原理
* （定理8.4）**鸽笼原理**或**抽屉原理**：设k是正整数，将k＋1或更多只鸽子关到k个鸽笼里，至少有一个鸽笼里有两个或更多只鸽子

* （推论8.5）设A和B都是有穷集合
    * 若$|A|>|B|$，则没有A到B的单函数
    * 若$|A|<|B|$，则没有A到B的满函数
    * 若$|A|＝|B|$，则任意A到B的单函数或满函数也是双函数

* （定理8.6）**广义鸽笼原理**：将N个舞台放到k个盒子，则至少有一个盒子至少有$\lceil N/k\rceil$个物体
* 拉姆齐定理
## 排列与组合
* （定义8.6）从n个可区别的物体*不允许重复*地选择r个物体进行*有序*安排，称为n个物体的r-**排列**。如果n个物体构成集合S，也成为S的r-排列。S的n-排列称为**全排列**。我们用$P^r_n$或$P(n,r)$表示S的r-排列数。
* （定理8.7）  

$$P(n,r)=\frac{n!}{(n-r)!}=n(n-1)\cdots (n-r+1)$$

* （定义8.6）从n个可区别的物体*不允许重复*、*不计顺序*地选择r个物体，称为n个物体的r **组合**。如果n个物体构成集合S，也成为S的r组合。S的r组合数记为$C_n^r$或$C(n,r)$。组合数$C(n,r)$也称为**二项式系数**，这时通常记为$\binom{n}{r}$
* 可以将组合数$C(n,r)$理解为n元素集合的r子集数，这种理解方式称为**集合论解释**；也可以理解为长度为n且含r个1的二进制串数，称为**二进制串解释**。组合数学中等式可以通过论证等式两边是对同一个集合元素的不同计数方式来证明，这称为**双计数证明**，也可以论证他们分别是对两个有一一映射关系的集合的计数，这成为**双函数证明**，这两种证明方法称为**组合证明**。等式也可以用更严谨代数法证明，称为**代数证明**
* （定理8.8）**组合数的对称式** 

$$C(n,r)=C(n,n-r),r\leq n$$

* （引理8.9）$r<n$

$$(r+1)C(n,r+1)=(n-r)C(n,r)$$

* （定理8.10）$r\leq n$

$$C(n,r)=\frac{P(n,r)}{P(r,r)}=\frac{n!}{r!(n-r)!}$$

### 二项式定理与组合等式
* （定理8.11）**二项式定理**：设x,y是两个变量，n是正整数，则：

$$\begin{align}(x+y)^n=&\sum_{i=0}^n\binom{n}{i}x^iy^{n-i}\\=&\binom{n}{0}y^n+\binom{n}{1}y^{n-1}+\cdots+\binom{n}{n}x^n\end{align}$$


* 二项式定理常见的代入展开式：
    * $当y=1时,(x+1)^n=\binom{n}{0}+\binom{n}{1}x+\cdots+\binom{n}{n}x^n$
    * $当x=1,y=1时,\binom{n}{0}+\binom{n}{1}+\cdots+\binom{n}{n}=2^n$
    * $当x=-1,y=1时,\binom{n}{0}+\binom{n}{2}+\binom{n}{4}+\cdots=\binom{n}{1}+\binom{n}{3}+\binom{n}{5}+\cdots=2^{n-1}$
    * $当x=2,y=1时,\binom{n}{0}+\binom{n}{1}x+\cdots+\binom{n}{n}x^n=3^n$
    * $令y=1后对式子微分得n(1+x)^{n-1}=\binom{n}{1}+2\binom{n}{2}x+\cdots+n\binom{n}{n}x^{n-1}$

* （定理8.12）**帕斯卡等式**设n,k是自然数，且$1\leq k\leq n-1$，有：

$$\binom{n}{k}=\binom{n-1}{k}+\binom{n-1}{k-1}$$

* 常用组合等式：
    * **递推式**:$r\binom{n}{r}=(n-r+1)\binom{n}{r-1}=n\binom{n-1}{r-1},1\leq r\leq n$
    * **乘积化简式**：$\binom{n}{m}\binom{m}{k}=\binom{n}{k}\binom{n-k}{m-k},k\leq m\leq n$
    * **上下求和式**：  
        $\sum_{k=0}^r\binom{m+k}{k}=\binom{m}{0}+\binom{m+1}{1}+\cdots+\binom{m+r}{r}=\binom{m+r+1}{r}$  
        $\sum_{k=0}^n\binom{k}{m}=\binom{0}{m}+\binom{1}{m}+\cdots+\binom{n}{m}=\binom{n+1}{m+1}$ 
    * **朱世杰-范德蒙等式**：$\sum_{k=0}^r\binom{m}{r-k}\binom{n}{k}=\binom{m+n}{r},r\leq m,r\leq n$

### 允许重复的排列与组合

* （定理8.13）n类物体允许重复的r排列数是$n^r$
* （定理8.14）每类物体分别有$m_1,m_2,\cdots,m_n$个的n类物体允许重复的$m_1+m_2\cdots+m_n=r$排列数是

$$C(r,m_1)C(r-m_1,m_2)\cdots C(r-m_1-m_2-\cdots-m_{n-1},m_n)=\frac{r!}{m_1!m_2!\cdots m_n!}$$

* （定理8.15）物体个数不限的n类物体允许重复地选r个物体的方案数，等于长度为n-1+r且有r个1的二进制串个数，等于$C(n-1+r,r)$

!!! note
    原理是问题可转化为解不定方程$x_1+x2+\cdots+x_n=r$的非负整数解，而这与长度为n-1+r且有r个1的二进制串一一对应
