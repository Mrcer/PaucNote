!!! warning
	前言：本篇笔记完全由课堂ppt总结得来，没有教材参考，因此笔记散乱且准确性无法保证！
# 计算机概要与技术
## 一些技术概要
* 冯·诺依曼体系于1945年提出：由储存器、运算器、控制器以及输入输出组成
* 冯·诺依曼提出存储程序原理，但他的架构将指令和数据一起存储，而哈佛架构则指令数据分开存储；冯氏架构指令数据共用总线，而哈佛架构独立总线；哈佛架构更多用于嵌入式应用
* 第一台通用电子计算机ENIAC于1946年诞生
* 操作系统用进程虚拟化计算机，用虚拟内存虚拟化内存，用文件虚拟化外存
* 计算机分为桌面电脑、服务器、超级计算机、嵌入式计算机
* ISA：指令集=>软硬件接口
* CPU的工作流程大致分为取指和执行
* 进程是一个执行中的程序，这种抽象使得系统得以同时运行多个程序，而为了交替执行程序OS要负责完成“上下文切换”；线程是轻量化进程，一个进程可包含多个线程
* 为实现速度与成本的平衡，计算机有存储层次：寄存器->缓存->主存->外存；呈现金字塔型，由上至下越来越慢、越来越大，单位价格也越来越便宜
## 计算机性能评价与性能指标
![](%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A6%82%E8%A7%88_md_files/abaeb880-31a6-11ed-b830-7da174a5c37f_20220911155222.jpeg)
### 总体评价指标
1. 性能指标
	* 响应时间：执行时间、等待时间
	* 吞吐率：单位时间内执行的任务数
	* 指令执行速度（MIPS、MFLOPS）
2. 功耗
3. 制造成本
### 性能测量
* 性能是响应时间的倒数
* **基本性能评价标准：CPU执行时间**
* 用户CPU时间指用于运行用户代码的时间，系统CPU时间是为执行用户程序而需运行一些操作系统代码的时间，其他时间包括IO操作或CPU花在其他程序的时间，这些加起来才是响应时间。
* CPU性能仅能表征用户CPU时间，不完全等于系统性能
* 时钟频率=1/时钟周期时间
* 1s=1000ms,1ms=1000μs,1μs=1000ns,1ns=1000ps
* **CPU执行时间=指令数×CPI×时钟周期时间**
* **对单条指令来说，CPI是确定的；对基准程序来说，CPI则是每条指令CPI的平均**
* SPEC CPU Benchmark提供一系列基准程序跑分
* 由于不同机器指令集不同，程序CPI不同，MIPS并不能很好反映计算机性能
### 性能影响因素
* CPU执行时间由指令数、CPI、时钟周期时间决定，而这三者由算法与编程语言、编译程序、指令集体系结构、计算机组成、实现技术决定，具体如下：

|         | 指令数 | CPI | 指令周期 |
|---------|-----|-----|------|
| 算法和编程语言 | x   | x   |      |
| 编译程序    | x   | x   |      |
| 指令集体系结构 | x   |  x  |  x   |
| 计算机组成   |     | x   | x    |
| 实现技术     |     |     | x    |

### 并行加速比
* 加速比=加速前运行时间/加速后运行时间
* **系统加速比$S$取决于可改进比例$f_e$和部件加速比$S_e$**  

$$S=\frac{1}{(1-f_e)+\frac{f_e}{S_e}}$$

* 仅对一部分进行优化，效益随优化程度下降，系统加速比不会大于$\frac{1}{(1-f_e)}$

